<th:block xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{/layouts/layout}">

<!-- =============================
      HEAD 영역 (CSS)
============================= -->
<th:block layout:fragment="head">
    <!-- AG Grid Quartz 테마 -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/ag-grid-community/styles/ag-theme-quartz.css" />
</th:block>


<!-- =============================
      CONTENT 영역
============================= -->
<th:block layout:fragment="content">

<div class="custom-body container-xxl flex-grow-1 container-p-y">
   

    <h3 class="fw-bold mb-4">생산계획생성</h3>


    <!-- =============================
         1) 조회 영역
    ============================== -->
    <div class="card mb-4">
        <div class="card-body d-flex align-items-end gap-3">

            <div class="flex-grow-1">
                <label class="form-label fw-bold">제품군 선택</label>
                <select id="productGroup" class="form-select w-50">
                    <option value="">전체</option>
                    <option value="SOLID">고체향수</option>
                    <option value="LIQUID">액체향수</option>
                    <option value="ETC">기타제품</option>
                </select>
            </div>

            <button id="btnLoadSuggested" class="btn btn-primary">
                조회
            </button>
            
            <a href="/production/plan" class="btn btn-outline-secondary">
            ← 목록으로
        </a>
            
    
        </div>
    </div>
    
    <!-- =============================
     조회 전 안내 메시지
		============================= -->
		<div id="placeholderMessage"
		     class="text-center"
		     style="padding: 80px 20px; color:#666; display:block;">
		
		    <div style="font-size:48px; opacity:0.3; margin-bottom:20px;">
		        📄
		    </div>
		
		    <h4 class="fw-bold mb-2">생산계획 목록을 조회해주세요</h4>
		    <p style="font-size:15px; line-height:1.6;">
		        제품군을 선택한 후 오른쪽 상단의 <b>[조회]</b> 버튼을 클릭하시면<br>
		        생산이 필요한 제품들의 목록이 자동으로 나타납니다.
		    </p>
		</div>
    
    
    <!-- ⭐⭐⭐ 조회 후 나타나는 전체 영역 ⭐⭐⭐ -->
    <div id="resultSection" style="display:none;">

    <!-- =============================
         2) 추천 생산 목록 GRID
    ============================== -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="fw-bold mb-3">필요 생산 목록</h5>

            <div id="suggestGrid" class="ag-theme-quartz" style="height: 450px;"></div>

            <!-- 조회결과가 없을 때 표시 -->
            <div id="noDataMessage"
                 style="display:none; padding:20px; color:#777; text-align:center;">
                조회된 필요 생산 항목이 없습니다.
            </div>
        </div>
    </div>
    
    <!-- =============================
     3) 메모 입력
		============================= -->
		<div class="card mb-4">
		    <div class="card-body">
		        <label class="form-label fw-bold">메모</label>
		        <textarea id="planMemo" class="form-control" rows="3"
		                  placeholder="생산계획에 대한 메모를 입력하세요"></textarea>
		    </div>
		</div>
    

    <!-- =============================
         3) 생산계획 생성 버튼
    ============================== -->
    <div class="card">
        <div class="card-body">            
            <button id="btnCreatePlan" type="button" class="btn btn-success btn-lg w-100">
	    생산계획 생성
	</button>
            
        </div>
    </div>

</div>
</div>

<!-- ============================ -->
<!-- 📌 수주 상세 목록 모달 -->
<!-- ============================ -->
<div class="modal fade" id="orderItemModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title">📌 수주 상세 목록</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <div id="orderItemGrid" class="ag-theme-quartz"
                     style="height: 400px; width: 100%;"></div>

            </div>

            <div class="modal-footer">
			    <button class="btn btn-primary" id="btnSelectOrders">선택완료</button>
			    <button class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
			</div>


        </div>
    </div>
</div>


</th:block>


<!-- =============================
      SCRIPT 영역
============================= -->
<th:block layout:fragment="myScript">

    <!-- AG Grid -->
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>

    <!-- 생산계획 추천 JS -->
    <script th:src="@{/js/production/plan_create.js}"></script>
</th:block>

</th:block>
